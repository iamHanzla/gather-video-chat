{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import'./RoomSetup.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RoomSetup(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),mic=_useState2[0],setMic=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),cam=_useState4[0],setCam=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var videoStream=useRef(null);useEffect(function(){var getUserMedia=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var stream;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return navigator.mediaDevices.getUserMedia({video:true,audio:true});case 3:stream=_context.sent;videoStream.current.srcObject=stream;_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getUserMedia(){return _ref.apply(this,arguments);};}();getUserMedia();},[]);var muteUnmute=function muteUnmute(e){if(mic){setMic(false);props.setMic(false);}else{setMic(true);props.setMic(true);}var enabled=videoStream.current.srcObject.getAudioTracks()[0].enabled;if(enabled){videoStream.current.srcObject.getAudioTracks()[0].enabled=false;}else{videoStream.current.srcObject.getAudioTracks()[0].enabled=true;}};var cameraOnOff=function cameraOnOff(e){if(cam){setCam(false);props.setCam(false);}else{setCam(true);props.setCam(true);}var enabled=videoStream.current.srcObject.getVideoTracks()[0].enabled;if(enabled){videoStream.current.srcObject.getVideoTracks()[0].enabled=false;}else{videoStream.current.srcObject.getVideoTracks()[0].enabled=true;}};var updateName=function updateName(newName){setName(newName);props.setName(newName);};var joinRoom=function joinRoom(e){if(name===\"\"){alert(\"please enter a valid name\");return;}props.setJoinedRoom(true);};return/*#__PURE__*/_jsxs(\"div\",{className:\"roomsetup\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return joinRoom(e);},children:\"Join\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return muteUnmute(e);},children:\"mute mic\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return cameraOnOff(e);},children:\"turn off cam\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"enter display name\",onChange:function onChange(e){return updateName(e.target.value);}}),/*#__PURE__*/_jsx(\"video\",{muted:true,ref:videoStream,autoPlay:true})]});}export default RoomSetup;","map":{"version":3,"sources":["/Users/shubhamkapoor/gather-video-chat/server/client/src/RoomSetup.js"],"names":["React","useState","useEffect","useRef","RoomSetup","props","mic","setMic","cam","setCam","name","setName","videoStream","getUserMedia","navigator","mediaDevices","video","audio","stream","current","srcObject","console","log","muteUnmute","e","enabled","getAudioTracks","cameraOnOff","getVideoTracks","updateName","newName","joinRoom","alert","setJoinedRoom","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport './RoomSetup.css'\n\nfunction RoomSetup(props) {\n\tconst [mic, setMic] = useState(true);\n\tconst [cam, setCam] = useState(true);\n\tconst [name, setName] = useState(\"\");\n\tconst videoStream = useRef(null);\n\n\tuseEffect(() => {\n\t\tconst getUserMedia = async () => {\n\t\t\ttry {\n\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n\t\t\t\tvideoStream.current.srcObject = stream;\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err)\n\t\t\t}\n\t\t}\n\n\t\tgetUserMedia();\n\t}, []);\n\n\tconst muteUnmute = (e) => {\n\t\tif (mic) {\n\t\t\tsetMic(false);\n\t\t\tprops.setMic(false);\n\t\t} else {\n\t\t\tsetMic(true);\n\t\t\tprops.setMic(true);\n\t\t}\n\t\tconst enabled = videoStream.current.srcObject.getAudioTracks()[0].enabled;\n\t\tif (enabled) {\n\t\t\tvideoStream.current.srcObject.getAudioTracks()[0].enabled = false;\t\n\t\t} else {\n\t\t\tvideoStream.current.srcObject.getAudioTracks()[0].enabled = true;\n\t\t}\n\t}\n\n\tconst cameraOnOff = (e) => {\n\t\tif (cam) {\n\t\t\tsetCam(false);\n\t\t\tprops.setCam(false);\n\t\t} else {\n\t\t\tsetCam(true);\n\t\t\tprops.setCam(true);\n\t\t}\n\t\tconst enabled = videoStream.current.srcObject.getVideoTracks()[0].enabled;\n\t\tif (enabled) {\n\t\t\tvideoStream.current.srcObject.getVideoTracks()[0].enabled = false;\n\t\t} else {\n\t\t\tvideoStream.current.srcObject.getVideoTracks()[0].enabled = true;\n\t\t}\n\t}\n\t\n\tconst updateName = (newName) => {\n\t\tsetName(newName);\n\t\tprops.setName(newName);\n\t}\n\n\tconst joinRoom = (e) => {\n\t\tif (name === \"\") {\n\t\t\talert(\"please enter a valid name\");\n\t\t\treturn;\n\t\t}\n\t\tprops.setJoinedRoom(true);\n\t}\n\n\treturn (\n\t\t<div className=\"roomsetup\">\n\t\t\t<button onClick={ (e) => joinRoom(e) } > \n\t\t\t\tJoin\n\t\t\t</button>\n\t\t\t<button onClick={ (e) => muteUnmute(e) }>\n\t\t\t\tmute mic\n\t\t\t</button>\n\t\t\t<button onClick={ (e) => cameraOnOff(e) }>\n\t\t\t\tturn off cam\n\t\t\t</button>\n\t\t\t<input placeholder=\"enter display name\" onChange={ (e) => updateName(e.target.value) }/>\n\t\t\t<video muted ref={ videoStream } autoPlay />\n\t\t</div>\n\t)\n}\n\nexport default RoomSetup"]},"metadata":{},"sourceType":"module"}