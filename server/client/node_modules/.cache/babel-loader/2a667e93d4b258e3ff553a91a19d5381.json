{"ast":null,"code":"import _regeneratorRuntime from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/shubhamkapoor/gather-video-chat/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'./Chat.css';import ScrollToBottom from'react-scroll-to-bottom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){var socket=_ref.socket,room=_ref.room,name=_ref.name;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var sendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var messageData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(message===\"\")){_context.next=4;break;}alert(\"Please enter a valid message\");return _context.abrupt(\"return\");case 4:messageData={room:room,sender:name,message:message,time:new Date(Date.now()).getHours()+\":\"+new Date(Date.now()).getMinutes()};_context.next=7;return socket.emit('send message',messageData);case 7:setMessages(function(list){return[].concat(_toConsumableArray(list),[messageData]);});setMessage(\"\");document.getElementById('input').value=\"\";case 10:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){socket.on('receive message',function(data){setMessages(function(list){return[].concat(_toConsumableArray(list),[data]);});});},[socket]);return/*#__PURE__*/_jsx(\"div\",{className:\"chatbox\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:\" Live Chat \"}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:/*#__PURE__*/_jsx(ScrollToBottom,{className:\"message-container\",children:messages.map(function(message){return/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message.sender===socket.id?/*#__PURE__*/_jsx(\"div\",{className:\"message-sent\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-sender\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sender-name\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sender-send\",children:[\" \",message.sender,\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[\" \",message.message,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time\",children:[\" \",message.time,\" \"]})]})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"message-received\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-receiver\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sender-received\",children:[\" \",message.sender,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"content-reciever\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[\" \",message.message,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time\",children:[\" \",message.time,\" \"]})]})})]})})});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"message-input\",id:\"input\",type:\"text\",placeholder:\"Type Message Here...\",onChange:function onChange(e){return setMessage(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"send-message\",onClick:function onClick(e){return sendMessage(e);},children:\"\\u25BA\"})]})]})});}export default Chat;","map":{"version":3,"sources":["/Users/shubhamkapoor/gather-video-chat/server/client/src/Chat.js"],"names":["React","useState","useEffect","ScrollToBottom","Chat","socket","room","name","messages","setMessages","message","setMessage","sendMessage","e","preventDefault","alert","messageData","sender","time","Date","now","getHours","getMinutes","emit","list","document","getElementById","value","on","data","map","id","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport './Chat.css'\nimport ScrollToBottom from 'react-scroll-to-bottom'\n\nfunction Chat({ socket, room, name }) {\n\tconst [messages, setMessages] = useState([])\n\tconst [message, setMessage] = useState(\"\")\n\n\tconst sendMessage = async (e) => {\n\t\te.preventDefault()\n\t\tif (message === \"\") {\n\t\t\talert(\"Please enter a valid message\")\n\t\t\treturn\n\t\t}\n\n\t\tconst messageData = {\n\t\t\troom: room,\n\t\t\tsender: name,\n\t\t\tmessage: message,\n\t\t\ttime: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes(),\n\t\t}\n\n\t\tawait socket.emit('send message', messageData)\n\t\tsetMessages((list) => [...list, messageData])\n\t\tsetMessage(\"\");\n\t\tdocument.getElementById('input').value = \"\"\n\t}\n\n  useEffect(() => {\n    socket.on('receive message', (data) => {\n\t\t\tsetMessages((list) => [...list, data])\n    })\n  }, [socket])\n\n\treturn (\n\t\t<div className=\"chatbox\">\n\t\t\t<div className=\"chat\">\n\t\t\t\t<div className=\"chat-header\"> Live Chat </div>\n\t\t\t\t<div className=\"chat-body\">\n\t\t\t\t\t<ScrollToBottom className=\"message-container\">\n\t\t\t\t\t\t{ messages.map((message) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div className=\"message\">\n\t\t\t\t\t\t\t\t\t{ message.sender === socket.id ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"message-sent\"> \n\t\t\t\t\t\t\t\t\t\t\t<div className=\"message-sender\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"sender-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"sender-send\"> { message.sender } </div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"content-box\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text\"> { message.message } </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"time\"> { message.time } </div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"message-received\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"message-receiver\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"sender-received\"> { message.sender } </div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"content-reciever\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"content-box\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text\"> { message.message } </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"time\"> { message.time } </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ScrollToBottom>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"chat-footer\">\n\t\t\t\t\t<input className=\"message-input\" id=\"input\" type=\"text\" placeholder=\"Type Message Here...\" onChange={ (e) => setMessage(e.target.value) }/>\n\t\t\t\t\t<button className=\"send-message\" onClick={ (e) => sendMessage(e) }> \n\t\t\t\t\t\t&#9658;\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Chat"]},"metadata":{},"sourceType":"module"}